{% extends 'base.html' %}
{% load static %}
{% block head_content %}

    
    <!DOCTYPE html>
    
      

{% endblock head_content %}
{% block container %}
<div class="content">
    <div class="row">
        <div class="col-md-12">
            
            <div class="card-body">
                
                <div class="typography-line">
                    <h3 class="color-typography"><span>Sector privado -</span> Evolucion del empleo registrado </h3>
                </div>
                <div class="typography-line">
                    
                    <blockquote>
                        <p class="blockquote blockquote-primary">
                        En el mes de marzo, la cantidad de asalariados del sector privado aumentÃ³ un 0,67% con respecto al mes de febrero. Asimismo, los puestos de trabajo aumentaron un 1% en comparaciÃ³n a marzo del aÃ±o 2024. Expresado en cantidades, en el mes de marzo se registraron 22.912 puestos de trabajo, 153 puestos mÃ¡s que en el mes de febrero. La diferencia de puestos de trabajo, con respecto a marzo del aÃ±o 2024, representa un aumento de 228 puestos. 
                        Si lo comparamos con marzo de 2023 la caÃ­da en tÃ©rminos porcentuales asciende a 16,6%, esto representa 4.563 empleos menos.                        </p>
                    </blockquote>
                        <div class="toolbar">
                            <button onclick="showView('chart')" class="active">ðŸ“ˆ</button>
                            <button onclick="showView('stats')">ðŸ“Š</button>
                            <button onclick="showView('table')">ðŸ“‹</button>
                           
                        </div>
                        <form method= "GET" action="{% url 'sector-privado' %} ">
                            {% csrf_token %}
                            <div class ="content-error">
                                
                                {% if error_message %}
                                    {{error_message}}
                                {%endif%}
                            </div>
                        
                            <div class="filtros-contenedor">
                                <div class="filtro-anios">
                                    <label>AÃ±os:</label>
                                    <div class="anio_inicio">
                                        <select name="anio_inicio">
                                            <option value="">Desde</option>
                                            <option value="2">2020</option>
                                            <option value="3">2021</option>
                                            <option value="4">2022</option>
                                            <option value="5">2023</option>
                                            <option value="6">2024</option>
                                            <option value="7">2025</option>
                                            
                                        </select>
                                        <span>â€”</span>
                                        <select name="anio_fin">
                                            <option value="">Hasta</option>
                                            <option value="2">2020</option>
                                            <option value="3">2021</option>
                                            <option value="4">2022</option>
                                            <option value="5">2023</option>
                                            <option value="6">2024</option>
                                            <option value="7">2025</option>
                                            
                                        </select>
                                    </div>
                                </div>
                            
                                <div class="filtro-categoria">
                                    <label for="categoria">Valor:</label>
                                    <select id="valor" name="valor">
                                        <option value="">Todas</option>
                                        <option value="1">Formosa</option>
                                        <option value="2">Nacional</option>
                                    
                                    </select>
                                </div>
                               



                            
                                <button type="submit">Aplicar filtros</button>
                            </div>     
                        </form>
                        <div id="chartView" class="view active">
                            <div class="chart-style" id="chart-privado"></div>
                        </div>

                        <div id="tableView" class="view">
                          <table id="example" class="stripe row-border order-column" style="width:100%">
                                <thead>
                                    <tr>
                                        <th>Mes</th>
                                        <th>AÃ±o</th>
                                        <th>Valor</th>
                                        <th>Intermensual</th>
                                        <th>Interanual</th>
                                        
                                       
                                    </tr>
                                </thead>
                                <tbody>
                                    {% for data in data_variacion %}
                                    <tr>
                                        <td>{{ data.mes__mes }}</td>
                                        <td>{{ data.anio__anio }}</td>
                                        <td>{{ data.valor__valor }}</td>
                                        <td>{{ data.variacion_intermensual }}</td>
                                        <td>{{ data.variacion_interanual }}</td>
                                       
                                    </tr>
                                    {% empty %}
                                    <tr><td colspan="5">No hay datos disponibles.</td></tr>
                                    {% endfor %}
                                </tbody>
                            </table>
                        </div>

                        <div id="statsView" class="view">
                            <div class="chart-style" id="chart-comparative"></div>
                            <div class="chart-style" id="chart-basic"></div>
                        </div>
                    </div>
            </div>
        </div>
    </div>
</div>
<script>
    

    function data_variacion_privado(){
        data_intermensual = []
        data_interanual = []
        data_total = []
        meses = []
        anio = ' '
        valor = ' '
        type = 0
        const divComparative = document.getElementById("chart-comparative");
        const divBasic = document.getElementById("chart-basic");
        data_chart = {}
        {% if type_graphic != 0 %}
            type = 1;
            divComparative.style.display = "block";
            divBasic.style.display = "none";
      
       
        {% for anio, ventas in context_chart.items %}
            data_chart['{{ anio }}'] = [
                {% for venta in ventas %}
                    {% if venta == None %}
                        0
                    {% else %}
                        {{ venta }}
                    {% endif %}
                    {% if not forloop.last %},{% endif %}
                {% endfor %}

            ];
        {% endfor %}
        
        {% endif %}

        {% for data in data_variacion %}
            data_intermensual.push({{ data.variacion_intermensual }});
            data_interanual.push({{ data.variacion_interanual }});
            meses.push('{{data.mes__mes}}' + " " + {{data.anio__anio}});
            
            anio = {{data.anio__anio}};
            valor = '{{data.valor__valor}}'
            {% if type_graphic == 0 %}
                divBasic.style.display = "block";
                divComparative.style.display = "none";
      
                {% if data.cantidad_empresas == None %}
                    data_total.push('Sin datos')
                {% else %}
                    data_total.push({{data.cantidad_empresas}})
                {% endif %}
                
            {% endif %}
        {% endfor %}
        
        return [data_intermensual,
                data_interanual,
                meses,
                anio,
                valor,
                type,
                data_chart,
                data_total]
    }
    
    
    data_graficos_privado()
    
    
    // Inicializa la vista del grÃ¡fico al cargar la pÃ¡gina
    document.addEventListener("DOMContentLoaded", function() {
        showView('chart');
    });

    
</script>




{% endblock container %}




